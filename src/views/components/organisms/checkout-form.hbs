{{! Checkout Form Component (T172) }}
<div class="bg-white rounded-lg shadow-md p-6">
  <form id="checkoutForm" onsubmit="handleCheckout(event)">
    {{! Shipping Information Section }}
    <div class="mb-8">
      <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
        <svg
          class="w-6 h-6 mr-2 text-blue-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
          />
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
          />
        </svg>
        Shipping Address
      </h2>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        {{! Contact Name }}
        <div class="md:col-span-2">
          <label
            for="contactName"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Contact Name *
          </label>
          <input
            type="text"
            id="contactName"
            name="shippingAddress.contactName"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="John Doe"
          />
        </div>

        {{! Contact Phone }}
        <div class="md:col-span-2">
          <label
            for="contactPhone"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Contact Phone *
          </label>
          <input
            type="tel"
            id="contactPhone"
            name="shippingAddress.contactPhone"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="+1-555-0100"
          />
        </div>

        {{! Street Address }}
        <div class="md:col-span-2">
          <label
            for="street"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Street Address *
          </label>
          <input
            type="text"
            id="street"
            name="shippingAddress.street"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="123 Main Street"
          />
        </div>

        {{! City }}
        <div>
          <label
            for="city"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            City *
          </label>
          <input
            type="text"
            id="city"
            name="shippingAddress.city"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="Springfield"
          />
        </div>

        {{! State }}
        <div>
          <label
            for="state"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            State *
          </label>
          <input
            type="text"
            id="state"
            name="shippingAddress.state"
            required
            maxlength="2"
            pattern="[A-Z]{2}"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase"
            placeholder="IL"
          />
          <p class="mt-1 text-xs text-gray-500">2-letter state code</p>
        </div>

        {{! Postal Code }}
        <div>
          <label
            for="postalCode"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Postal Code *
          </label>
          <input
            type="text"
            id="postalCode"
            name="shippingAddress.postalCode"
            required
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="62701"
          />
        </div>

        {{! Country }}
        <div>
          <label
            for="country"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Country *
          </label>
          <input
            type="text"
            id="country"
            name="shippingAddress.country"
            required
            maxlength="2"
            pattern="[A-Z]{2}"
            value="US"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent uppercase"
            placeholder="US"
          />
          <p class="mt-1 text-xs text-gray-500">2-letter country code</p>
        </div>
      </div>
    </div>

    {{! Order Information Section }}
    <div class="mb-8 pb-8 border-b">
      <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
        <svg
          class="w-6 h-6 mr-2 text-blue-600"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
          />
        </svg>
        Order Details
      </h2>

      <div class="space-y-4">
        {{! PO Number }}
        <div>
          <label
            for="poNumber"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Purchase Order Number (Optional)
          </label>
          <input
            type="text"
            id="poNumber"
            name="poNumber"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="PO-12345"
          />
        </div>

        {{! Order Notes }}
        <div>
          <label
            for="notes"
            class="block text-sm font-medium text-gray-700 mb-1"
          >
            Order Notes (Optional)
          </label>
          <textarea
            id="notes"
            name="notes"
            rows="3"
            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
            placeholder="Special delivery instructions or additional information..."
          ></textarea>
        </div>
      </div>
    </div>

    {{! Terms and Submit }}
    <div>
      {{! Terms Checkbox }}
      <div class="flex items-start mb-4">
        <input
          type="checkbox"
          id="terms"
          required
          class="mt-1 mr-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
        />
        <label for="terms" class="text-sm text-gray-700">
          I agree to the
          <a href="/terms" class="text-blue-600 hover:underline">Terms of
            Service</a>
          and
          <a href="/privacy" class="text-blue-600 hover:underline">Privacy
            Policy</a>
          *
        </label>
      </div>

      {{! Submit Button }}
      <button
        type="submit"
        class="w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition font-semibold text-lg flex items-center justify-center"
      >
        <svg
          class="w-5 h-5 mr-2"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 13l4 4L19 7"
          />
        </svg>
        Place Order
      </button>

      <p class="mt-4 text-xs text-center text-gray-500">
        Your order will be processed immediately and you'll receive a
        confirmation email.
      </p>
    </div>
  </form>
</div>

{{! Form Submission Script }}
<script>
  async function handleCheckout(event) { event.preventDefault(); const form =
  event.target; const submitButton =
  form.querySelector('button[type="submit"]'); // Disable submit button to
  prevent double submission submitButton.disabled = true; submitButton.innerHTML
  = '<svg class="animate-spin h-5 w-5 mr-2 text-white" fill="none" viewBox="0 0
  24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor"
  stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4
  12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0
  3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>Processing...'; // Collect
  form data const formData = new FormData(form); const data = { shippingAddress:
  { street: formData.get('shippingAddress.street'), city:
  formData.get('shippingAddress.city'), state:
  formData.get('shippingAddress.state').toUpperCase(), postalCode:
  formData.get('shippingAddress.postalCode'), country:
  formData.get('shippingAddress.country').toUpperCase(), contactName:
  formData.get('shippingAddress.contactName'), contactPhone:
  formData.get('shippingAddress.contactPhone'), }, poNumber:
  formData.get('poNumber') || undefined, notes: formData.get('notes') ||
  undefined, }; try { const response = await fetch('/api/orders', { method:
  'POST', headers: { 'Content-Type': 'application/json', 'Authorization':
  `Bearer ${localStorage.getItem('authToken')}`, }, body: JSON.stringify(data),
  }); if (response.ok) { const order = await response.json(); // Redirect to
  order confirmation page window.location.href = `/orders/${order.orderNumber}`;
  } else { const error = await response.json(); alert(`Failed to place order:
  ${error.message || 'Please try again'}`); // Re-enable submit button
  submitButton.disabled = false; submitButton.innerHTML = '<svg class="w-5 h-5
  mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path
  stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4
  4L19 7" /></svg>Place Order'; } } catch (error) { console.error('Error placing
  order:', error); alert('An error occurred while placing your order. Please try
  again.'); // Re-enable submit button submitButton.disabled = false;
  submitButton.innerHTML = '<svg class="w-5 h-5 mr-2" fill="none" viewBox="0 0
  24 24" stroke="currentColor"><path stroke-linecap="round"
  stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" /></svg>Place
  Order'; } }
</script>
