{{!--
  Image Gallery Organism Component
  Usage: {{> organisms/image-gallery images=product.images productName=product.name }}
--}}
<div class="flex flex-col gap-4">
  <!-- Main Image -->
  <div class="w-full bg-center bg-no-repeat bg-cover flex flex-col justify-end overflow-hidden rounded-xl min-h-80 md:min-h-[480px] bg-white dark:bg-slate-800/50"
    data-alt="A high-resolution image of the {{productName}}, showing its metallic body and precision components."
    style='background-image: url("{{#if images}}{{#with (lookup images 0)}}{{url}}{{/with}}{{/if}}");'
    id="main-product-image">
  </div>

  <!-- Thumbnail Carousel -->
  {{#if images}}
    <div class="flex overflow-x-auto [-ms-scrollbar-style:none] [scrollbar-width:none] [&::-webkit-scrollbar]:hidden">
      <div class="flex items-stretch p-1 gap-3">
        {{#each images}}
          <div
            class="flex h-full flex-1 cursor-pointer flex-col gap-2 rounded-lg min-w-24 {{#if isPrimary}}border-2 border-primary{{else}}opacity-60 hover:opacity-100{{/if}}"
            onclick="changeMainImage('{{url}}', '{{altText}}', this)">
            <div class="w-full bg-center bg-no-repeat aspect-square bg-cover rounded-md flex flex-col"
              data-alt="{{altText}}"
              style='background-image: url("{{url}}");'>
            </div>
          </div>
        {{/each}}
      </div>
    </div>
  {{/if}}
</div>

