[Terminal output truncated: ~1411KB dropped from beginning]
RoutesByStatusQueryHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Queries.GetRoutesByStatusQueryHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommand,HydraPharm.TMS.Application.Routes.Commands.CreateRouteResult] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommandHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommand,HydraPharm.TMS.Domain.Logistics.Route] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommandHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommand,HydraPharm.TMS.Application.Integration.Commands.ImportOrdersResult] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Common.Repositories.IOrderRepository' while attempting to activate 'HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommandHandler'.) (Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommand,HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusResult] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Common.IDeliveryRepository' while attempting to activate 'HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommandHandler'.)
---- System.InvalidOperationException : Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Routes.Queries.GetRouteByIdQuery,HydraPharm.TMS.Domain.Logistics.Route] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Routes.Queries.GetRouteByIdQueryHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Queries.GetRouteByIdQueryHandler'.
-------- System.InvalidOperationException : Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Queries.GetRouteByIdQueryHandler'.
---- System.InvalidOperationException : Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Routes.Queries.GetRoutesByStatusQuery,System.Collections.Generic.List`1[HydraPharm.TMS.Domain.Logistics.Route]] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Routes.Queries.GetRoutesByStatusQueryHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Queries.GetRoutesByStatusQueryHandler'.
-------- System.InvalidOperationException : Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Queries.GetRoutesByStatusQueryHandler'.
---- System.InvalidOperationException : Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommand,HydraPharm.TMS.Application.Routes.Commands.CreateRouteResult] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommandHandler'.
-------- System.InvalidOperationException : Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Commands.CreateRouteCommandHandler'.
---- System.InvalidOperationException : Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommand,HydraPharm.TMS.Domain.Logistics.Route] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommandHandler'.
-------- System.InvalidOperationException : Unable to resolve service for type 'HydraPharm.TMS.Application.Routes.Repositories.IRouteRepository' while attempting to activate 'HydraPharm.TMS.Application.Routes.Commands.OptimizeRouteCommandHandler'.
---- System.InvalidOperationException : Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommand,HydraPharm.TMS.Application.Integration.Commands.ImportOrdersResult] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Common.Repositories.IOrderRepository' while attempting to activate 'HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommandHandler'.
-------- System.InvalidOperationException : Unable to resolve service for type 'HydraPharm.TMS.Application.Common.Repositories.IOrderRepository' while attempting to activate 'HydraPharm.TMS.Application.Integration.Commands.ImportOrdersFromERPCommandHandler'.
---- System.InvalidOperationException : Error while validating the service descriptor 'ServiceType: MediatR.IRequestHandler`2[HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommand,HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusResult] Lifetime: Transient ImplementationType: HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommandHandler': Unable to resolve service for type 'HydraPharm.TMS.Application.Common.IDeliveryRepository' while attempting to activate 'HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommandHandler'.
-------- System.InvalidOperationException : Unable to resolve service for type 'HydraPharm.TMS.Application.Common.IDeliveryRepository' while attempting to activate 'HydraPharm.TMS.Application.Deliveries.Commands.UpdateDeliveryStatusCommandHandler'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
   at Microsoft.Extensions.DependencyInjection.ServiceCollectionContainerBuilderExtensions.BuildServiceProvider(IServiceCollection services, ServiceProviderOptions options)
   at Microsoft.Extensions.Hosting.HostApplicationBuilder.Build()
   at Microsoft.AspNetCore.Builder.WebApplicationBuilder.Build()
   at Program.<Main>$(String[] args) in E:\TMS\backend\HydraPharm.TMS.Api\Program.cs:line 108
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.DelegatedWebApplicationFactory.CreateHost(IHostBuilder builder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at HydraPharm.TMS.Tests.Integration.Services.ERPServiceTests..ctor(WebApplicationFactory`1 factory) in E:\TMS\backend\HydraPharm.TMS.Tests\Integration\Services\ERPServiceTests.cs:line 39
   at InvokeStub_ERPServiceTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
----- Inner Stack Trace #1 (System.InvalidOperationException) -----
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
----- Inner Stack Trace -----
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
----- Inner Stack Trace #2 (System.InvalidOperationException) -----
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
----- Inner Stack Trace -----
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
----- Inner Stack Trace #3 (System.InvalidOperationException) -----
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
----- Inner Stack Trace -----
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
----- Inner Stack Trace #4 (System.InvalidOperationException) -----
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
----- Inner Stack Trace -----
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
----- Inner Stack Trace #5 (System.InvalidOperationException) -----
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
----- Inner Stack Trace -----
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
----- Inner Stack Trace #6 (System.InvalidOperationException) -----
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider..ctor(ICollection`1 serviceDescriptors, ServiceProviderOptions options)
----- Inner Stack Trace -----
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateArgumentCallSites(ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain, ParameterInfo[] parameters, Boolean throwIfCallSiteNotFound)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.CreateConstructorCallSite(ResultCache lifetime, ServiceIdentifier serviceIdentifier, Type implementationType, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.TryCreateExact(ServiceDescriptor descriptor, ServiceIdentifier serviceIdentifier, CallSiteChain callSiteChain, Int32 slot)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteFactory.GetCallSite(ServiceDescriptor serviceDescriptor, CallSiteChain callSiteChain)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.ValidateService(ServiceDescriptor descriptor)
  Passed HydraPharm.TMS.Tests.Application.Routes.Commands.OptimizeRouteCommandHandlerTests.Handle_WithValidRoute_ShouldOptimizeRouteAndReturnSuccess [2 s]
  Passed HydraPharm.TMS.Tests.Application.Routes.Commands.OptimizeRouteCommandHandlerTests.Handle_WhenOptimizationFails_ShouldReturnFailure [14 ms]
  Passed HydraPharm.TMS.Tests.Application.Routes.Commands.OptimizeRouteCommandHandlerTests.Handle_WithNonExistentRoute_ShouldReturnFailure [49 ms]
  Passed HydraPharm.TMS.Tests.Application.Routes.Queries.GetRouteByIdQueryHandlerTests.Handle_WithNonExistentRouteId_ShouldReturnNull [2 s]
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.DeleteAsync_WithNonExistingId_ShouldNotThrow [2 s]
  Error Message:
   Did not expect any exception, but found System.InvalidOperationException: Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSiteMain(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitCache(ServiceCallSite callSite, RuntimeResolverContext context, ServiceProviderEngineScope serviceProviderEngine, RuntimeResolverLock lockType)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScopeCache(ServiceCallSite callSite, RuntimeResolverContext context)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor`2.VisitCallSite(ServiceCallSite callSite, TArgument argument)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.Resolve(ServiceCallSite callSite, ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine.<>c__DisplayClass2_0.<RealizeService>b__0(ServiceProviderEngineScope scope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_Finder()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.FindAsync(Object[] keyValues)
   at HydraPharm.TMS.Infrastructure.Repositories.ApiKeyRepository.DeleteAsync(Guid id, CancellationToken cancellationToken) in E:\TMS\backend\HydraPharm.TMS.Infrastructure\Repositories\ApiKeyRepository.cs:line 59
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.<DeleteAsync_WithNonExistingId_ShouldNotThrow>b__11_0() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 188
   at FluentAssertions.Specialized.AsyncFunctionAssertions`2.NotThrowAsync(String because, Object[] becauseArgs).
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Specialized.DelegateAssertionsBase`2.NotThrowInternal(Exception exception, String because, Object[] becauseArgs)
   at FluentAssertions.Specialized.AsyncFunctionAssertions`2.NotThrowAsync(String because, Object[] becauseArgs)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.DeleteAsync_WithNonExistingId_ShouldNotThrow() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 189
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.08]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:03.08]       Stack Trace:
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:03.08]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.AddAsync_ShouldAddApiKeyToDatabase [FAIL]
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:03.08]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.08]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.08]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.08]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.08]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.08]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.08]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:03.08]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:03.08]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:03.08]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
[xUnit.net 00:00:03.08]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
[xUnit.net 00:00:03.08]         E:\TMS\backend\HydraPharm.TMS.Infrastructure\Repositories\ApiKeyRepository.cs(46,0): at HydraPharm.TMS.Infrastructure.Repositories.ApiKeyRepository.AddAsync(ApiKey apiKey, CancellationToken cancellationToken)
[xUnit.net 00:00:03.08]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(130,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.AddAsync_ShouldAddApiKeyToDatabase()
[xUnit.net 00:00:03.08]         --- End of stack trace from previous location ---
[xUnit.net 00:00:03.36]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:03.36]       Stack Trace:
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:03.36]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithNonExistingKey_ShouldReturnNull [FAIL]
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:03.36]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.36]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.36]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.36]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.36]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.36]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.36]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:03.36]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:03.36]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:03.36]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.DbContext.get_Model()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
[xUnit.net 00:00:03.36]            at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
[xUnit.net 00:00:03.36]         E:\TMS\backend\HydraPharm.TMS.Infrastructure\Repositories\ApiKeyRepository.cs(19,0): at HydraPharm.TMS.Infrastructure.Repositories.ApiKeyRepository.GetByKeyAsync(String key, CancellationToken cancellationToken)
[xUnit.net 00:00:03.36]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(53,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithNonExistingKey_ShouldReturnNull()
[xUnit.net 00:00:03.36]         --- End of stack trace from previous location ---
[xUnit.net 00:00:03.63]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:03.63]       Stack Trace:
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.63]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:03.64]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.63]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithExistingKey_ShouldReturnApiKey [FAIL]
[xUnit.net 00:00:03.64]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.64]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.64]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.64]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.64]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.64]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:03.64]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:03.64]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:03.64]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
[xUnit.net 00:00:03.64]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
[xUnit.net 00:00:03.64]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(36,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithExistingKey_ShouldReturnApiKey()
[xUnit.net 00:00:03.64]         --- End of stack trace from previous location ---
[xUnit.net 00:00:03.82]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:03.82]       Stack Trace:
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:03.82]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.82]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.82]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.82]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.82]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.82]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.82]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:03.82]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:03.82]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByCreatedByAsync_ShouldReturnApiKeysForUser [FAIL]
[xUnit.net 00:00:03.82]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:03.82]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:03.82]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRangeAsync(TEntity[] entities)
[xUnit.net 00:00:03.82]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(107,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByCreatedByAsync_ShouldReturnApiKeysForUser()
[xUnit.net 00:00:03.82]         --- End of stack trace from previous location ---
  Passed HydraPharm.TMS.Tests.Application.Routes.Queries.GetRoutesByStatusQueryHandlerTests.Handle_WhenRepositoryThrowsException_ShouldThrowException [1 s]
  Passed HydraPharm.TMS.Tests.Application.Routes.Queries.GetRouteByIdQueryHandlerTests.Handle_WhenRepositoryThrowsException_ShouldThrowException [7 ms]
  Passed HydraPharm.TMS.Tests.Application.Routes.Queries.GetRouteByIdQueryHandlerTests.Handle_WithValidRouteId_ShouldReturnRoute [3 ms]
  Passed HydraPharm.TMS.Tests.Application.Routes.Queries.GetRoutesByStatusQueryHandlerTests.Handle_WithValidStatus_ShouldReturnRoutes [8 ms]
  Passed HydraPharm.TMS.Tests.Application.Routes.Queries.GetRoutesByStatusQueryHandlerTests.Handle_WithNoRoutesFound_ShouldReturnEmptyList [4 ms]
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.AddAsync_ShouldAddApiKeyToDatabase [267 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.Add(TEntity entity)
   at HydraPharm.TMS.Infrastructure.Repositories.ApiKeyRepository.AddAsync(ApiKey apiKey, CancellationToken cancellationToken) in E:\TMS\backend\HydraPharm.TMS.Infrastructure\Repositories\ApiKeyRepository.cs:line 46
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.AddAsync_ShouldAddApiKeyToDatabase() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 130
--- End of stack trace from previous location ---
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithNonExistingKey_ShouldReturnNull [282 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_Model()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityType()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.CheckState()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.get_EntityQueryable()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.System.Linq.IQueryable.get_Provider()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at HydraPharm.TMS.Infrastructure.Repositories.ApiKeyRepository.GetByKeyAsync(String key, CancellationToken cancellationToken) in E:\TMS\backend\HydraPharm.TMS.Infrastructure\Repositories\ApiKeyRepository.cs:line 19
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithNonExistingKey_ShouldReturnNull() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 53
--- End of stack trace from previous location ---
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithExistingKey_ShouldReturnApiKey [272 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByKeyAsync_WithExistingKey_ShouldReturnApiKey() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 36
--- End of stack trace from previous location ---
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByCreatedByAsync_ShouldReturnApiKeysForUser [183 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRangeAsync(TEntity[] entities)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByCreatedByAsync_ShouldReturnApiKeysForUser() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 107
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.98]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:03.98]       Stack Trace:
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:03.98]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.98]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.98]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.98]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.98]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.98]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByIdAsync_WithExistingId_ShouldReturnApiKey [FAIL]
[xUnit.net 00:00:03.98]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:03.98]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:03.98]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:03.98]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:03.98]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
[xUnit.net 00:00:03.98]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
[xUnit.net 00:00:03.98]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(69,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByIdAsync_WithExistingId_ShouldReturnApiKey()
[xUnit.net 00:00:03.98]         --- End of stack trace from previous location ---
[xUnit.net 00:00:04.12]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:04.12]       Stack Trace:
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:04.12]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.DeleteAsync_WithExistingId_ShouldRemoveApiKey [FAIL]
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:04.12]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.12]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.12]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.12]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.12]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.12]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.12]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:04.12]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:04.12]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:04.12]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
[xUnit.net 00:00:04.12]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
[xUnit.net 00:00:04.12]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(173,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.DeleteAsync_WithExistingId_ShouldRemoveApiKey()
[xUnit.net 00:00:04.12]         --- End of stack trace from previous location ---
[xUnit.net 00:00:04.29]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:04.30]       Stack Trace:
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.29]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetAllAsync_ShouldReturnAllApiKeys [FAIL]
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:04.30]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.30]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.30]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.30]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.30]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.30]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.30]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:04.30]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:04.30]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:04.30]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:04.30]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRangeAsync(TEntity[] entities)
[xUnit.net 00:00:04.30]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(88,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetAllAsync_ShouldReturnAllApiKeys()
[xUnit.net 00:00:04.30]         --- End of stack trace from previous location ---
[xUnit.net 00:00:04.48]       System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
[xUnit.net 00:00:04.48]       Stack Trace:
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
[xUnit.net 00:00:04.48]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.48]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.48]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.48]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.48]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.48]            at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
[xUnit.net 00:00:04.48]            at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
[xUnit.net 00:00:04.48]            at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
[xUnit.net 00:00:04.48]     HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.UpdateAsync_ShouldUpdateApiKeyInDatabase [FAIL]
[xUnit.net 00:00:04.48]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
[xUnit.net 00:00:04.48]            at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
[xUnit.net 00:00:04.48]            at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
[xUnit.net 00:00:04.48]         E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs(150,0): at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.UpdateAsync_ShouldUpdateApiKeyInDatabase()
[xUnit.net 00:00:04.48]         --- End of stack trace from previous location ---
[xUnit.net 00:00:04.48]   Finished:    HydraPharm.TMS.Tests
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByIdAsync_WithExistingId_ShouldReturnApiKey [158 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetByIdAsync_WithExistingId_ShouldReturnApiKey() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 69
--- End of stack trace from previous location ---
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.DeleteAsync_WithExistingId_ShouldRemoveApiKey [142 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.DeleteAsync_WithExistingId_ShouldRemoveApiKey() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 173
--- End of stack trace from previous location ---
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetAllAsync_ShouldReturnAllApiKeys [173 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddRangeAsync(TEntity[] entities)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.GetAllAsync_ShouldReturnAllApiKeys() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 88
--- End of stack trace from previous location ---
  Failed HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.UpdateAsync_ShouldUpdateApiKeyInDatabase [183 ms]
  Error Message:
   System.InvalidOperationException : Unable to determine the relationship represented by navigation 'Order.History' of type 'List<OrderHistory>'. Either manually configure the relationship, or ignore this property using the '[NotMapped]' attribute or by using 'EntityTypeBuilder.Ignore' in 'OnModelCreating'.
  Stack Trace:
     at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.<ValidatePropertyMapping>g__Validate|7_0(IConventionTypeBase typeBase, <>c__DisplayClass7_0&)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.ValidatePropertyMapping(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.InMemory.Infrastructure.Internal.InMemoryModelValidator.Validate(IModel model, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelRuntimeInitializer.Initialize(IModel model, Boolean designTime, IDiagnosticsLogger`1 validationLogger)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.CreateModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Infrastructure.ModelSource.GetModel(DbContext context, ModelCreationDependencies modelCreationDependencies, Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.CreateModel(Boolean designTime)
   at Microsoft.EntityFrameworkCore.Internal.DbContextServices.get_Model()
   at Microsoft.EntityFrameworkCore.Infrastructure.EntityFrameworkServicesBuilder.<>c.<TryAddCoreServices>b__8_4(IServiceProvider p)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.get_ContextServices()
   at Microsoft.EntityFrameworkCore.DbContext.get_InternalServiceProvider()
   at Microsoft.EntityFrameworkCore.DbContext.get_DbContextDependencies()
   at Microsoft.EntityFrameworkCore.DbContext.Microsoft.EntityFrameworkCore.Internal.IDbContextDependencies.get_StateManager()
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.EntryWithoutDetectChanges(TEntity entity)
   at Microsoft.EntityFrameworkCore.Internal.InternalDbSet`1.AddAsync(TEntity entity, CancellationToken cancellationToken)
   at HydraPharm.TMS.Tests.Infrastructure.Repositories.ApiKeyRepositoryTests.UpdateAsync_ShouldUpdateApiKeyInDatabase() in E:\TMS\backend\HydraPharm.TMS.Tests\Infrastructure\Repositories\ApiKeyRepositoryTests.cs:line 150
--- End of stack trace from previous location ---

Total tests: 172
     Passed: 139
     Failed: 33
 Total time: 5,3395 Seconds
Test Run Failed.
       _VSTestConsole:
         MSB4181: The "VSTestTask" task returned false but did not log an error.
     5>Done Building Project "E:\TMS\backend\HydraPharm.TMS.Tests\HydraPharm.TMS.Tests.csproj" (VSTest target(s)) -- FAILED.
     1>Done Building Project "E:\TMS\backend\HydraPharm.TMS.sln" (VSTest target(s)) -- FAILED.

Build FAILED.
    0 Warning(s)
    0 Error(s)

Time Elapsed 00:00:12.89

Workload updates are available. Run `dotnet workload list` for more information.
